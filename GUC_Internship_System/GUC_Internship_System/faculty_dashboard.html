<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Faculty Dashboard</title>
</head>
<body>
  <h1>Faculty Dashboard</h1>
  <button type="button" onclick="downloadEvaluations()">Download Evaluations as PDF</button>

  <!-- View All Students Section -->
  <div class="students-container">
    <h3>All Students</h3>
    <label for="statusFilter">Filter by Internship Status:</label>
    <select id="statusFilter" onchange="filterStudentsByStatus()">
      <option value="">All Statuses</option>
      <option value="current intern">Current Intern</option>
      <option value="internship complete">Internship Complete</option>
      <option value="not started">Not Started</option>
    </select>
    <button onclick="fetchAllStudents()">Load Students</button>
    <ul id="studentsList"></ul>
  </div>

  <!-- View All Submitted Reports Section -->
  <div class="reports-container">
    <h3>All Submitted Reports</h3>
    <div class="search-filter-container">
      <select id="filterByMajor">
        <option value="">All Majors</option>
        <option value="Computer Science">Computer Science</option>
        <option value="Engineering">Engineering</option>
        <option value="Business">Business</option>
      </select>
      <select id="filterByStatus">
        <option value="">All Statuses</option>
        <option value="pending">Pending</option>
        <option value="flagged">Flagged</option>
        <option value="rejected">Rejected</option>
        <option value="accepted">Accepted</option>
      </select>
    </div>
    <button onclick="fetchAllReports()">Load Reports</button>
    <ul id="reportsList"></ul>
  </div>

  <!-- Student Profile Modal -->
  <div id="studentProfileModal" style="display: none; position: fixed; top: 20%; left: 30%; width: 40%; background: white; border: 1px solid #ccc; padding: 20px; z-index: 1000;">
    <h3>Student Profile</h3>
    <p><strong>Name:</strong> <span id="profileName"></span></p>
    <p><strong>Email:</strong> <span id="profileEmail"></span></p>
    <p><strong>Major:</strong> <span id="profileMajor"></span></p>
    <p><strong>Internship Status:</strong> <span id="profileStatus"></span></p>
    <p><strong>Additional Details:</strong> <span id="profileDetails"></span></p>
    <button onclick="closeStudentProfile()">Close</button>
  </div>

  <!-- Report Status Update Modal -->
  <div id="reportStatusModal" style="display: none; position: fixed; top: 20%; left: 30%; width: 40%; background: white; border: 1px solid #ccc; padding: 20px; z-index: 1000;">
    <h3>Update Report Status</h3>
    <p><strong>Title:</strong> <span id="reportTitle"></span></p>
    <p><strong>Student:</strong> <span id="reportStudent"></span></p>
    <label for="updateStatus">Set Status:</label>
    <select id="updateStatus">
      <option value="pending">Pending</option>
      <option value="flagged">Flagged</option>
      <option value="rejected">Rejected</option>
      <option value="accepted">Accepted</option>
    </select>
    <button onclick="updateReportStatus()">Update Status</button>
    <button onclick="closeReportStatusModal()">Close</button>
  </div>

  <!-- Include jsPDF and the reusable PDF generator -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
  <script src="js/modules/pdfGenerator.js"></script>
  <script src="js/faculty_dashboard.js"></script>
  <script>
    localStorage.setItem("evaluations", JSON.stringify({
      "John Doe": "Excellent performance in the internship.",
      "Jane Smith": "Good understanding of the subject matter."
    }));
  </script>
</body>
</html>