<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SCAD Dashboard</title>
  <link rel="stylesheet" href="css/scad.css">
</head>
<body>
  <header>
    <h1>SCAD Office -Company Applications</h1>
  </header>

  <section class="controls">
    <input type="text" id="searchInput" placeholder="Search by Company Name">
    <select id="industryFilter">
      <option value="">All Industries</option>
      <option value="Tech">Tech</option>
      <option value="Finance">Finance</option>
      <option value="Healthcare">Healthcare</option>
      <option value="Education">Education</option>
      <!-- Add more industries as needed -->
    </select>
    <button type="button" onclick="downloadCompanyApplications()">Download Applications as PDF</button>
  </section>

  <section class="company-list" id="companyList">
    <!-- Company cards will be rendered here -->
  </section>

  <script src="js/dashboardLogic.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
  <script src="js/modules/pdfGenerator.js"></script>
</body>
<div class="dashboard-container">
  <h2>Welcome, SCAD Office</h2>

  <!-- Internship Cycle Date Form -->
  <div class="cycle-date-container">
    <h3>Set Internship Cycle Dates</h3>
    <form id="cycleDateForm">
      <label for="startDate">Start Date:</label>
      <input type="date" id="startDate" required>

      <label for="endDate">End Date:</label>
      <input type="date" id="endDate" required>

      <button type="submit">Save Dates</button>
    </form>

    <div id="dateDisplay" style="margin-top: 15px; font-weight: bold;"></div>
  </div>

  <!-- View All Students Section -->
  <div class="students-container">
    <h3>All Students</h3>
    <label for="statusFilter">Filter by Internship Status:</label>
    <select id="statusFilter" onchange="filterStudentsByStatus()">
      <option value="">All Statuses</option>
      <option value="current intern">Current Intern</option>
      <option value="internship complete">Internship Complete</option>
      <option value="not started">Not Started</option>
    </select>
    <button onclick="fetchAllStudents()">Load Students</button>
    <ul id="studentsList"></ul>
  </div>

  <!-- View All Submitted Reports Section -->
  <div class="reports-container">
    <h3>All Submitted Reports</h3>

    <!-- Filters for Major and Status -->
    <div class="search-filter-container">
      <select id="filterByMajor">
        <option value="">All Majors</option>
        <option value="Computer Science">Computer Science</option>
        <option value="Engineering">Engineering</option>
        <option value="Business">Business</option>
      </select>
      <select id="filterByStatus">
        <option value="">All Statuses</option>
        <option value="pending">Pending</option>
        <option value="flagged">Flagged</option>
        <option value="rejected">Rejected</option>
        <option value="accepted">Accepted</option>
      </select>
    </div>

    <button onclick="fetchAllReports()">Load Reports</button>
    <ul id="reportsList"></ul>
  </div>

  <!-- Student Profile Modal -->
  <div id="studentProfileModal" style="display: none; position: fixed; top: 20%; left: 30%; width: 40%; background: white; border: 1px solid #ccc; padding: 20px; z-index: 1000;">
    <h3>Student Profile</h3>
    <p><strong>Name:</strong> <span id="profileName"></span></p>
    <p><strong>Email:</strong> <span id="profileEmail"></span></p>
    <p><strong>Major:</strong> <span id="profileMajor"></span></p>
    <p><strong>Internship Status:</strong> <span id="profileStatus"></span></p>
    <p><strong>Additional Details:</strong> <span id="profileDetails"></span></p>
    <button onclick="closeStudentProfile()">Close</button>
  </div>
</div>
<!-- Evaluation Reports Section -->
    <section class="card">
      <h3>Evaluation Reports</h3>
      <p class="instruction-text">Click on an evaluation report below to view its details.</p>
      <button class="primary-button" onclick="fetchEvaluationReports()">Load Evaluation Reports</button>
      <ul id="evaluationReportsList"></ul>
    </section>

    <!-- Modal for viewing detailed evaluation report -->
    <div id="evaluationReportModal" class="modal">
      <div class="modal-content">
        <h3>Evaluation Report Details</h3>
        <div class="details-grid">
          <p><strong>Student Name:</strong> <span id="evalStudentName"></span></p>
          <p><strong>Company Name:</strong> <span id="evalCompanyName"></span></p>
          <p><strong>Main Supervisor:</strong> <span id="evalSupervisor"></span></p>
          <p><strong>Start Date:</strong> <span id="evalStartDate"></span></p>
          <p><strong>End Date:</strong> <span id="evalEndDate"></span></p>
        </div>
        <button class="secondary-button" onclick="closeEvaluationReportModal()">Close</button>
      </div>
    </div>
  </div>


<script src="js/scad.js"></script>
<script>
  let allStudents = []; // Store all students for filtering

  // Mock function to fetch all students (replace with actual API or database call)
  function fetchAllStudents() {
    allStudents = [
      { name: "Alice", email: "alice@example.com", major: "Computer Science", status: "current intern", details: "Working at TechCorp" },
      { name: "Bob", email: "bob@example.com", major: "Engineering", status: "internship complete", details: "Completed internship at BuildIt" },
      { name: "Charlie", email: "charlie@example.com", major: "Business", status: "not started", details: "Looking for opportunities" },
    ];

    displayStudents(allStudents);
  }

  // Function to display students in the list
  function displayStudents(students) {
    const studentsList = document.getElementById("studentsList");
    studentsList.innerHTML = ""; // Clear the list before populating

    students.forEach(student => {
      const li = document.createElement("li");
      li.textContent = `Name: ${student.name}, Email: ${student.email}, Status: ${student.status}`;
      li.style.cursor = "pointer";
      li.onclick = () => viewStudentProfile(student); // Attach click event to view profile
      studentsList.appendChild(li);
    });
  }

  // Function to filter students by internship status
  function filterStudentsByStatus() {
    const statusFilter = document.getElementById("statusFilter").value;
    const filteredStudents = statusFilter
      ? allStudents.filter(student => student.status === statusFilter)
      : allStudents;

    displayStudents(filteredStudents);
  }

  // Function to view a student's profile
  function viewStudentProfile(student) {
    document.getElementById("profileName").textContent = student.name;
    document.getElementById("profileEmail").textContent = student.email;
    document.getElementById("profileMajor").textContent = student.major;
    document.getElementById("profileStatus").textContent = student.status;
    document.getElementById("profileDetails").textContent = student.details;

    document.getElementById("studentProfileModal").style.display = "block";
  }

  // Function to close the student profile modal
  function closeStudentProfile() {
    document.getElementById("studentProfileModal").style.display = "none";
  }

  // Mock function to fetch all submitted reports (replace with actual API or database call)
  function fetchAllReports() {
    const reports = [
      { title: "Internship at TechCorp", student: "Alice", date: "2025-05-01" },
      { title: "Internship at BuildIt", student: "Bob", date: "2025-04-15" },
      { title: "Internship at BizWorld", student: "Charlie", date: "2025-03-20" },
    ];

    displayReports(reports);
  }

  // Function to display reports in the list
  function displayReports(reports) {
    const reportsList = document.getElementById("reportsList");
    reportsList.innerHTML = ""; // Clear the list before populating

    reports.forEach(report => {
      const li = document.createElement("li");
      li.textContent = `Title: ${report.title}, Student: ${report.student}, Date: ${report.date}`;
      reportsList.appendChild(li);
    });
  }
</script>

</html>
